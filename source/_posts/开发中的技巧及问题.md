---
title: 开发中的技巧及问题
date: 2019-03-22 23:57:31
tags:
categories:
---

# 开发网站记录
<!-- more -->

#组件化开发
css不换行
```css
white-space: nowrap;
```
## 下拉菜单的方式有3种
第一种是用js改变添加css，这样导致页面的回流，和重绘问题，性能低下

第二种是用js添加class类来完成操作，相对来说不错，

第三种是最优的，就是用`:hover` 伪类来解决，不过`IE6`不支持

# 分离下拉菜单，组件化开发
这种组件化开发思想确实很不错，可以节省很多代码结构，把类似的结构提出来，弄一个公共的样式
老师将的思路很清晰
[本节代码](https://github.com/DemoorBug/lx/blob/master/组件化开发/站点导航/dropdown.html)

可复用`html`
```html
<div class="dropdown menu" data-dropdown="menu">
  <div class="dropdown-toggle link">
    我的慕陶<i class="dropdown-arrow"></i>
  </div>
  <ul class="dropdown-layer dropdown-left">
  </ul>
</div>
```
复用`css`
```css
.dropdown {
  position: relative;
}

.dropdown-toggle {
  position: relative;
  z-index: 2;
}

.dropdown-arrow {
  display: inline-block;
  vertical-align: middle;
}

.dropdown-layer {
  display: none;
  z-index: 1;
  position: absolute;
}

.dropdown-left {
  left: 0;
  right: auto;
}

.dropdown-right {
  right: 0;
  left: auto;
}
```
封装可服用`javascript`
```js
(function($) {
  'use strict'
  function dropdown(elem) {
    var $elem = $(elem)
    $elem.hover(function() {
      var $this = $(this)
      $this.addClass($this.data('dropdown')+'-active');
    }, function() {
      var $this = $(this)
      $this.removeClass($this.data('dropdown')+'-active');
    })
  }
  $.fn.extend({
    dropdown: function() {
      this.each(function() {
        dropdown(this)
      })
      return this
    }
  })
})(jQuery);

$('.dropdown').dropdown()
```

# 下拉图标问题
用图片的方式至少会增加1次http请求

第二种方式就是把图片转化为`base64`，`IE6-7`不支持,编码后比原图大，不能缓存

纯`CSS`箭头，兼容`IE6`
```CSS
arrow-down {
  width: 0;
  height: 0;
  border: 4px solid #535b62;
  border-left-color: transform;
  border-left-color: transform;
  border-bottom: none;
}
```
不过呢，`IE6` 不兼容`transform`
```css
arrow-down {
  width: 0;
  height: 0;
  border: 4px solid #535b62;
  border-right-color: transform;
  _border-right-color: #fff; /* 兼容IE6写法。_只有IE6会识别 */
  border-left-color: transform;
  _border-left-color: #fff; /* 兼容IE6写法。_只有IE6会识别 */
  border-bottom: none;
}
```

## 用字体图标的技巧
因为是字体的问题，所以会继承父级的`line-height`所以我们把字体图片的，`line-height: 1`就可以解决这个问题，还用旋转图标的样式因为是`css3`的原因，所以直接用`css3`的查找方式

```css
[class*='-active'] .dropdown-arrow {
  transform: rotate(180deg);
}
```
动画呢，我基本都是单独写，因为感觉`all`老师说不高效，不过写一个利于以后的修改
```css
.transition {
  transition: all .3s
}
```
